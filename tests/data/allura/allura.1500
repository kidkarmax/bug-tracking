{"ticket": {"status": "closed", "reported_by_id": "4bf69ef01be1ce1b03000084", "description": "Gwoo was getting this on /tickets/ when he created a milestone with empty name.  We should prevent the empty name for sure, and probably avoid this error too:\r\n\r\n~~~~\r\nModule forgetracker.tracker_main:138 in sidebar_menu\r\n<<              search_bins.append(SitemapEntry(\r\n                           h.text.truncate(label, 72), bin.url(), className='nav_child',\r\n                           small=c.app.globals.bin_count(label)['hits']))\r\n               for fld in c.app.globals.milestone_fields:\r\n                   milestones.append(SitemapEntry(h.text.truncate(fld.label, 72)))\r\n>>  small=c.app.globals.bin_count(label)['hits']))\r\nModule forgetracker.model.ticket:108 in bin_count\r\n<<      def bin_count(self, name):\r\n               if self._bin_counts_expire < datetime.utcnow():\r\n                   self._refresh_counts()\r\n               for d in self._bin_counts_data:\r\n                   if d['summary'] == name: return d\r\n>>  self._refresh_counts()\r\nModule forgetracker.model.ticket:97 in _refresh_counts\r\n<<              for m in fld.milestones:\r\n                       k = '%s:%s' % (fld.name, m.name)\r\n                       r = search_artifact(Ticket, k, rows=0)\r\n                       hits = r is not None and r.hits or 0\r\n                       q = search_artifact(Ticket, '%s && (%s)' % (k, self.closed_query), rows=0)\r\n>>  r = search_artifact(Ticket, k, rows=0)\r\nModule allura.lib.search:106 in search_artifact\r\n<<          else:\r\n                   text = \"syntax error?\"\r\n               raise ValueError(text)\r\n       \r\n       def find_shortlinks(text):\r\n>>  raise ValueError(text)\r\nValueError: Cannot parse '_milestone_s:': Encountered \"&lt;EOF&gt;\" at line 1, column 13. Was expecting one of: \"(\" ... \"*\" ... &lt;QUOTED&gt; ... &lt;TERM&gt; ... &lt;PREFIXTERM&gt; ... &lt;WILDTERM&gt; ... \"[\" ... \"{\" ... &lt;NUMBER&gt; ... \r\n~~~~", "labels": [], "private": false, "discussion_thread": {"_id": "cfc44d0c", "posts": [{"slug": "1737", "subject": "#1500 Fix error when milestone name is empty"}, {"slug": "9d06", "subject": "#1500 Fix error when milestone name is empty"}, {"slug": "3134", "subject": "#1500 Fix error when milestone name is empty"}], "discussion_id": "4c3493551be1ce11d8000034", "subject": ""}, "mod_date": "2011-03-23 14:41:37.360000", "ticket_num": 1500, "custom_fields": {"_size": "2", "_component": "General", "_milestone": "feb-24"}, "related_artifacts": [], "reported_by": "brondsem", "assigned_to_id": "4bf460731be1ce3e2f000023", "summary": "Fix error when milestone name is empty", "assigned_to": "spiffk", "_id": "4d5aac860594ca1caa0003af", "discussion_thread_url": "/p/allura/tickets/_discuss/thread/cfc44d0c/", "created_date": "2011-02-15 16:40:38.288000"}}